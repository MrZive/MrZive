<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bjsxt.dataOut.project">

	<select id="getProjectConsumption" parameterType="com.bjsxt.dataOut.entity.ProjectConsumption" resultType="com.bjsxt.dataOut.entity.ProjectConsumption">
		SELECT
		id,
        consumption_id 'consumptionId',
        store_pay 'storePay',
        bankcard_pay 'bankcardPay',
        cash_pay cashPay,
        point_pay pointPay,
        is_book isBook,
        payment,
        effective_earn effectiveEarn,
        remark,
        is_birthday isBirthday,
        real_payment realPayment,
        owe,
        member_card_id memberCardId,
        is_cash_coupon isCashCoupon,
        create_date createDate,
        is_fail isFail,
        shopid 'shopId',
        cash_coupon cashCoupon,
        buy_owe buyOwe,
        is_detail_pay isDetailPay
        FROM
		shop_s_consumption_project
		<where>
			<if test="id != null">
				AND id = #{id}
			</if>
			<if test="consumptionId != null">
				AND consumption_id = #{consumptionId}
			</if>
			<if test="memberCardId != null">
				AND member_card_id = #{memberCardId}
			</if>
			<if test="isFail != null">
				AND is_fail = #{isFail}
			</if>
		</where>
	</select>


	<select id="getProjectDetailConsumption" parameterType="com.bjsxt.dataOut.entity.ProjectDetailConsumption" resultType="com.bjsxt.dataOut.entity.ProjectDetailConsumption">
		SELECT
		id,
        consumption_id consumptionId,
        consumption_project_id consumptionProjectId,
        project_id projectId,
        activity_id activityId,
        buy_number buyNumber,
        number,
        coupon,
        is_send isSend,
        create_date createDate,
        end_date endDate,
        member_card_id memberCardId,
        consumption_set_id consumptionSetId,
        price,
        service_time serviceTime,
        is_count isCount,
        shop_id shopId,
        is_fail isFail,
        experience_price experiencePrice,
        promotion_price promotionPrice,
        market_price marketPrice,
        buy_type buyType,
        channel_id channelId,
        payment,
        store_pay storePay,
        bankcard_pay bankcardPay,
        cash_pay cashPay,
        point_pay pointPay,
        is_book isBook,
        owe,
        buy_owe buyOwe,
        effective_earn effectiveEarn,
        real_payment realPayment,
        is_pay isPay,
        remark,
        is_cash_coupon isCashCoupon,
        is_tuoke isTuoke,
        service_type serviceType
		FROM
		shop_s_consumption_project_detail
		<where>
			<if test="id != null">
				AND id = #{id}
			</if>
			<if test="consumptionId != null">
				AND consumption_id = #{consumptionId}
			</if>
			<if test="consumptionProjectId != null">
				AND consumption_project_id = #{consumptionProjectId}
			</if>
			<if test="consumptionSetId != null">
				AND consumption_set_id = #{consumptionSetId}
			</if>
			<if test="memberCardId != null">
				AND member_card_id = #{memberCardId}
			</if>
		</where>
	</select>
	
	
	<select id="getProjectDone" parameterType="com.bjsxt.dataOut.entity.ProjectDone" resultType="com.bjsxt.dataOut.entity.ProjectDone">
		SELECT
        id,
        consumption_id consumptionId,
        is_fail isFail,
        create_date createDate,
        member_card_id memberCardId
        FROM shop_s_consumption_project_done_order
        <where>
        	<if test="id != null">
        		AND id = #{id}
        	</if>
        	<if test="consumptionId != null">
        		AND consumption_id = #{consumptionId}
        	</if>
        	<if test="memberCardId != null">
				AND member_card_id = #{memberCardId}
			</if>
        	<if test="isFail != null">
        		AND is_fail = #{isFail}
        	</if>
        </where>
    </select>
	
	
	<select id="getProjectDoneDetail" parameterType="com.bjsxt.dataOut.entity.ProjectDoneDetail" resultType="com.bjsxt.dataOut.entity.ProjectDoneDetail">
		SELECT
        id,
        consumption_id consumptionId,
        order_id orderId,
        project_detail_id projectDetailId,
        done_number doneNumber,
        is_satisfied isSatisfied,
        create_date createDate,
        done_service_time doneServiceTime,
        is_fail isFail,
        projectid projectId,
        membercardid memberCardId,
        select_project_id selectProjectId,
        price,
        remark
        FROM shop_s_consumption_project_done
        <where>
        	<if test="id != null">
        		AND id = #{id}
        	</if>
        	<if test="consumptionId != null">
        		AND consumption_id = #{consumptionId}
        	</if>
        	<if test="orderId != null">
        		AND order_id = #{orderId}
        	</if>
        	<if test="projectDetailId != null">
        		AND project_detail_id = #{projectDetailId}
        	</if>
        	<if test="memberCardId != null">
				AND member_card_id = #{memberCardId}
			</if>
        	<if test="isFail != null">
        		AND is_fail = #{isFail}
        	</if>
        </where>
    </select>

</mapper>